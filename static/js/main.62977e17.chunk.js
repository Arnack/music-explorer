(this.webpackJsonpmexp=this.webpackJsonpmexp||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){},107:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},129:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),r=n(28),a=n.n(r),i=(n(104),n(105),n(106),n(107),n(147)),l=n(30),o=n(84),j=n(32),d=n(27),u=n(16),b=n(52),h=n.n(b),O=n(66),x=n(85),p=n(67),m=n.n(p),v=function e(){Object(x.a)(this,e)};v.getReleaseDescription=function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("https://api.discogs.com/releases/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v.getReleases=function(){var e=Object(O.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.release,c=t.page,console.log("release",n),e.next=4,m.a.get("https://api.discogs.com/database/search?token=".concat("rxdPcTSCazkeakCCdoniSEbUClXWfTtlsemLLnmR","&page=").concat(c,"&per_page=10&type=release&q=").concat(n));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var f=Object(u.d)("search text updated"),g=Object(u.c)(v.getReleases),y=Object(u.e)({pagination:{page:1,pages:0,per_page:5,items:0},searchText:"",results:[]}).on(g.doneData,(function(e,t){return Object(d.a)(Object(d.a)({},t.data),{},{searchText:""})})).on(f,(function(e,t){return Object(d.a)(Object(d.a)({},e),{},{searchText:t})})),N=n(23),w=(n(126),n(127),n(5)),S=function(e){var t=e.release,n=e.selected,c=e.handleSelect;return Object(w.jsxs)("div",{className:"list-item ".concat(n?"selected":""),onClick:function(){return c(t.id)},children:[Object(w.jsx)("div",{className:"thumb-container",children:Object(w.jsx)("img",{className:"release-thumb",src:t.thumb?t.thumb:"",alt:"release thumb"})}),Object(w.jsxs)("div",{className:"content-container",children:[Object(w.jsxs)("div",{className:"heading",children:[Object(w.jsx)("span",{className:"title",children:t.title}),Object(w.jsx)("span",{className:"year",children:t.year})]}),Object(w.jsx)("div",{className:"genres",children:Array.isArray(t.genre)?t.genre.join(", "):t.genre}),Object(w.jsx)("div",{className:"labels",children:Array.isArray(t.label)?t.label.join(", "):t.label})]})]})},C=(n(129),n(144)),T=n(49),k=Object(w.jsx)(T.a,{style:{fontSize:40},spin:!0}),F=function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)(C.a,{indicator:k}),Object(w.jsx)("span",{children:" Loading..."})]})},L=function(e){var t,n,s,r,a,i,l=e.releaseId,o=Object(c.useState)(null),j=Object(N.a)(o,2),d=j[0],u=j[1],b=Object(c.useState)(!1),h=Object(N.a)(b,2),O=h[0],x=h[1];return Object(c.useEffect)((function(){l&&(x(!0),v.getReleaseDescription(l).then((function(e){u(e.data)})).catch((function(e){console.error("Unable to fetch release description",e)})).finally((function(){x(!1)})))}),[l]),l?O?Object(w.jsx)(F,{}):Object(w.jsxs)("div",{className:"release-description-container",children:[Object(w.jsx)("h3",{children:null===d||void 0===d?void 0:d.title}),Object(w.jsx)("div",{className:"go-back"}),(null===d||void 0===d?void 0:d.notes)&&Object(w.jsx)("div",{className:"notes",children:null===d||void 0===d?void 0:d.notes}),Object(w.jsx)("table",{children:Object(w.jsxs)("tbody",{children:[Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Artists:"}),Object(w.jsx)("td",{children:null===d||void 0===d||null===(t=d.artists)||void 0===t?void 0:t.map((function(e){return e.name})).join(", ")})]}),Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Country:"}),Object(w.jsx)("td",{children:null===d||void 0===d?void 0:d.country})]}),Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Labels:"}),Object(w.jsx)("td",{children:null===d||void 0===d||null===(n=d.labels)||void 0===n?void 0:n.map((function(e){return e.name?e.name:e})).join(", ")})]}),Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Genres:"}),Object(w.jsx)("td",{children:null===d||void 0===d||null===(s=d.genres)||void 0===s?void 0:s.map((function(e){return e.name?e.name:e})).join(", ")})]}),Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Styles:"}),Object(w.jsx)("td",{children:null===d||void 0===d||null===(r=d.styles)||void 0===r?void 0:r.map((function(e){return e.name?e.name:e})).join(", ")})]}),Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Formats:"}),Object(w.jsx)("td",{children:null===d||void 0===d||null===(a=d.formats)||void 0===a?void 0:a.map((function(e){return e.name?e.name:e})).join(", ")})]}),Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Release Date:"}),Object(w.jsx)("td",{children:null===d||void 0===d?void 0:d.year})]})]})}),null===d||void 0===d||null===(i=d.videos)||void 0===i?void 0:i.map((function(e){var t=new URL(e.uri).searchParams.get("v");if(e.uri.includes("youtube"))return Object(w.jsx)("iframe",{width:"300",src:"https://www.youtube.com/embed/".concat(t),title:e.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}))]}):Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{children:"Select an item to see a description"}),Object(w.jsx)("p",{children:"Nothing is selected"})]})},P=n(145),R=function(){var e=Object(j.a)(y).results,t=Object(j.a)(y).searchText,n=Object(j.a)(y).pagination,s=Object(c.useState)(null),r=Object(N.a)(s,2),a=r[0],i=r[1];return Object(w.jsxs)("div",{className:"split-list-wrapper",children:[Object(w.jsxs)("div",{className:"list-container",children:[e.map((function(e){return Object(w.jsx)(S,{release:e,handleSelect:i,selected:e.id===a})})),Object(w.jsx)("div",{className:"pagination-wrapper",children:Object(w.jsx)(P.a,{current:n.page,defaultPageSize:n.per_page,total:n.pages,hideOnSinglePage:!0,size:"small",responsive:!0,onChange:function(e){console.log("np",e),g({release:t,page:e})},showSizeChanger:!1})})]}),Object(w.jsx)("div",{className:"item-details",children:Object(w.jsx)(L,{releaseId:a})})]})},A=function(e){Object(o.a)(e);var t=Object(j.a)(y).results;return Object(j.a)(g.pending)?Object(w.jsx)(F,{}):t&&0!==t.length?Object(w.jsx)("div",{children:Object(w.jsx)(R,{})}):Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{children:"Welcome to music explorer"}),Object(w.jsx)("p",{children:"There is nothing to display now, but you can search for releases"})]})},z=n(146),D=function(){var e=Object(j.a)(y).searchText;return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(z.a,{placeholder:"Search",onChange:function(e){return f(e.target.value)},onPressEnter:function(){return g({release:e,page:1})}})})},E=function(){return Object(w.jsxs)(i.a,{className:"layout",children:[Object(w.jsxs)(l.c,{children:[Object(w.jsx)("div",{className:"logo",children:"Explore Music"}),Object(w.jsx)("div",{className:"logo searchbox",children:Object(w.jsx)(D,{})})]}),Object(w.jsx)(l.a,{style:{padding:"0 50px"},children:Object(w.jsx)("div",{className:"site-layout-content",children:Object(w.jsx)(A,{})})})]})};var I=function(){return Object(w.jsx)("div",{className:"App",children:Object(w.jsx)(E,{})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,148)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};a.a.render(Object(w.jsx)(s.a.StrictMode,{children:Object(w.jsx)(I,{})}),document.getElementById("root")),B()}},[[141,1,2]]]);
//# sourceMappingURL=main.62977e17.chunk.js.map